% layout 'default';
% title 'Growbot';
% content_for description => 'Growbot Dashboard';
% use Mojo::JSON qw (from_json);

    <div class="container-fluid">
      <div class="row g-2">
      % foreach my $name (devices) {
      %   my $d = from_json device ($name);
      %   foreach my $type (sort @{$d->{dashboard}}) {
      %     my $m = $d->{measurements}{$type};
        <div class="col-lg-4 portfolio-item">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title text-center" id="device-<%= $name %>">
                <a href="/device/<%= $name %>"><%= $d->{name} %></a>
              </h5>
              <h6 class="card-subtitle text-center text-muted">
                <a href="/device/<%= $name %>/<%= $type %>"><%= $m->{type} %></a>
              </h6>
              <p class="text-center">
                <%= sprintf "%s %s", $m->{measure}, $m->{unit} %>
              </p>
              <a href="/device/<%= $name %>/<%= $type %>.svg">
                <figure class="figure w-90">
                  <%== data ($name, $type, "svg", 18) %>
                </figure>
              </a>
            </div>
          </div>
        </div>
      %   }
      % }
      </div>
    </div>
